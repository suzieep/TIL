# 230319 동시성 제어와 잠금

### 동시성 제어

- 잠금은 리소스를 소비한다, 잠금 설정 / 잠금 해제 여부 확인 / 잠금 해제 등 모든 잠금 작업에는 오버헤드 발생
  - 오버헤드 : 특정 기능을 수행하는데 드는 간접적인 시간, 메모리 등 자원

```
- 공유 잠금(Shared Lock, 읽기 잠금) : 공유되거나 상호 차단되지 않는다. (동시에 읽을 수 있으며 간섭 하지 않음)
- 전용 잠금(Exclusive Lock, 쓰기 잠금) : 배타적, 특정 시간에 하나의 클라이언트만 리소스에 쓰고, 클라이언트가 쓸 때는 모든 읽기를 막는다.
```

<br>

#### 잠금 세분화

- 테이블 잠금
  - MySQL 가장 기본적인 잠금 전략, 가장 낮은 오버헤드
  - 클라이언트가 테이블에 쓰기를 원할 때 쓰기 잠금을 획득, 다른 모든 읽기 및 쓰기 작업 차단. 아무도 쓰지 않을 때 단순 조회를 하고자 하면 다른 읽기 잠금과 충돌하지 않는 읽기 잠금을 얻을 수 있음
  - READ LOCAL 테이블 잠금은 일부 유형의 동시 쓰기 작업 허용, 대기열 별도 관리
- 행 잠금 - 가장 큰 동시성 제공, 큰 오버헤드 - 서로 다른 행에서 편집 가능 - 서버가 아닌 스토리지 엔진에서 구현, 서버는 모름
  <br>
